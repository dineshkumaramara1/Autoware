<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<!--
To save map
$rosrun pcl_ros pointcloud_to_pcd input:=ndt_map
or
rostopic pub /config/ndt_mapping_output runtime_manager/ConfigNdtMappingOutput
filter_res
filename
-->
<!--
mapping configure
rostopic pub /config/ndt_mapping runtime_manager/ConfigNdtMapping
ndt_res : default:1.0  Resolution of NDT grid structure (VoxelGridCovariance)
step_size:  default:0.1 maximum step size for More-Thuente line search.
trans_eps : default:0.01 minimum transformation difference for termination condition.
voxel_leaf_size : dafault: 1.0  (in code 2.0) VoxelGrid input filtering

iter: 30  : max number of registration iterations.

Example
rostopic pub /config/ndt_mapping runtime_manager/ConfigNdtMapping "header:
  seq: 0
  stamp: {secs: 0, nsecs: 0}
  frame_id: ''
resolution: 1.0
step_size: 0.1
trans_eps: 0.01
leaf_size: 5.0"

-->
<launch>
<!--
  <param name="use_sim_time" value="true"/>
-->

  <arg name="rviz_file" default="$(find autoware_jit_launch)/rviz/mapping.rviz" />
  <arg name="pcap" default="/media/Data/BAGFILES/ForSlam2016_06/2016_06_03_scu_routeA/pcap-000.pcap" />
  <arg name="calibration" default="$(find velodyne_pointcloud)/params/VLP16db.yaml"/>
  <arg name="min_range" default="2.4" />
  <arg name="max_range" default="130.0" />



  <!--data play -->
    <!--
      <node pkg="rosbag" type="play" name="rosbag" args=" _ _ clock  8tags.bag"/>
    -->
<!--
    OR rosrun velodyne_driver velodyne_node _mol:=VLP16 _pcap:=/media/Data/BAGFILES/ForSlam2016_06/2016_06_03_scu_fast_shuttles_pcap/pcap/pcap-000 _read_once:=true
-->
      <!-- start nodelet manager and driver nodelets -->
      <include file="$(find velodyne_driver)/launch/nodelet_manager.launch">
        <arg name="model" value="VLP16"/>
        <arg name="read_once" value="true"/>
        <arg name="rpm" value="600"/>
        <arg name="frame_id" value="velodyne"/>
        <arg name="pcap" value="$(arg pcap)"/>
      </include>

      <!-- start cloud nodelet -->
      <include file="$(find velodyne_pointcloud)/launch/cloud_nodelet.launch">
        <arg name="calibration" value="$(arg calibration)"/>
        <arg name="min_range" value="$(arg min_range)"/>
        <arg name="max_range" value="$(arg max_range)"/>
<!--
        <arg name="view_direction" value="0.0"/>
        <arg name="view_width" value="6.28318530718"/>
-->
      </include>



    <!-- rviz visualization-->
<!--
    <param name="robot_description" textfile="$(find scu_data)/3d_model/golf_cart1/golf_cart1.urdf"/>
-->
    <node pkg="rviz" type="rviz" name="$(anon rviz)" args="-d $(arg rviz_file)" output="screen" />
</launch>
